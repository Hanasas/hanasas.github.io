---
title: P1754 球迷购票问题题解
date: 2019-03-15
updated: 2019-03-15
categories: algorithm
tags:
    - algorithm
    - OI
top: 1
cover: # https://s3.bmp.ovh/imgs/2025/06/01/4dadd8b68269d1a3.jpg
excerpt: "文章摘要"
excerptAlign: center  # center left right justify


---

# 原题目

[题目地址](https://www.luogu.com.cn/problem/P1754)

## 题目描述

盛况空前的足球赛即将举行。球赛门票售票处排起了球迷购票长龙。

按售票处规定，每位购票者限购一张门票，且每张票售价为 $50$ 元。在排成长龙的球迷中有 $n$ 个人手持面值 $50$ 元的钱币，另有 $n$ 个人手持面值 $100$ 元的钱币。假设售票处在开始售票时没有零钱。试问这 $2n$ 个球迷有多少种排队方式可使售票处不致出现找不出钱的尴尬局面。

例如当 $n=2$ 时，用 A 表示手持 $50$ 元面值的球迷，用 $B$ 表示手持 $100$ 元钱的球迷。则最多可以得到以下两组不同的排队方式，使售票员不至于找不出钱。


- 第一种：$\mathtt{[A,A,B,B]}$；
- 第二种：$\mathtt{[A,B,A,B]}$。

对于给定的 $n$，计算 $2n$ 个球迷有多少种排队方式，可以使售票处不至于找不出钱。

## 输入格式

一个整数，代表 $n$ 的值。

## 输出格式

一个整数，表示方案数。

## 数据范围及约定

对于全部数据，$0 \le n \le 20$。

-------------------------

# 题解

大家都是巨佬卡特兰数什么的，我看了眼算法标签有个dp，就蒙了个dp过来还真过了

用`f[i][j]`表示第i个人来时，还剩j张50元钞票的方案数，考虑上一个人`（i-1）`可能拿着50元，即带来一张50元钞票，或拿着100元，即带走一张50元钞票，那么`f[i][j]`就由两种情况转移而来：

（1）第`i-1`人带来一张50元钞票：`f[i-1][j+1]`

（2）第`i-1`人带走一张50元钞票：`f[i-1][j-1]`

于是
```C++
f[i][j] = f[i-1][j+1]+f[i-1][j-1]
```
考虑j的上界和下界的问题：当`j = 0`时，`f[i][j] = f[i-1][j+1]`. 上界的问题其实不用考虑，数组初始化为0，只要不越界就好了.边界条件`f[1][0] = 1`.

dp要算到第`2N+1`人，他来的时候才是第`2N`人买完票，以为拿50元和拿100元的人数是一样的，所以第`2N`人来的时候应该刚好一张钞票都不剩，于是答案存放在`f[2N+1][0]`中.

粘个代码，其实好多地方还可以改但是懒
```C++
#include <cstdio>
#include <iostream>
#include <algorithm>
#include <cstring>
#define maxn 43
typedef long long ll;
using namespace std;
//浮生若梦，为欢几何 
ll N;
ll f[maxn][maxn];
/*
f[i][j]=f[i-1][j+1]+f[i-1][j-1]
f[1][0]=1
*/
int main(){
	scanf("%lld",&N);
	memset(f,0,sizeof(f));
	f[1][0]=1;
	for(int i=2;i<=2*N+1;i++){
		for(int j=0;j<=N;j++){
			if(j==0)f[i][j]=f[i-1][j+1];
			else f[i][j]=f[i-1][j+1]+f[i-1][j-1];
		
		//	printf("f[%d][%d]=%d\n",i,j,f[i][j]);
		}
	}
	printf("%lld",f[2*N+1][0]);
return 0; 
}
```
空间复杂度可以优化，`f[i][j]`中i只表示奇偶性开2就可以了

但是确实太懒就算了