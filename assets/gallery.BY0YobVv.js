const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YunGallery.C3kHe1qC.js","assets/framework.VTn4SQHu.js"])))=>i.map(i=>d[i]);
import{p as b,b as w,k as x,P as g,O as d,S as s,a0 as K,a8 as V,ae as $,X as S,C as m,a9 as T,ah as F,M as O,a3 as h,N as C,a6 as Y,V as L,u as t,F as G,_ as M}from"./framework.VTn4SQHu.js";import{l as N,u as U,a as I,b as j,d as H,m as W,n as z,c as J,e as X,f as q}from"./app.Bho2iUbc.js";import{_ as Q}from"./YunGallery.Chex7UoE.js";import"./chunks/dayjs.DPscOGnl.js";import{_ as Z}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.Co5abI3r.js";import{u as ee,a as te}from"./chunks/vue-router.CRRX0jay.js";import{u as oe}from"./chunks/vue-i18n.Bbx_Eog3.js";import"./chunks/@vueuse/motion.Cs3PXLQO.js";import"./chunks/pinia.D09Bv-rL.js";import"./chunks/nprogress.DgNGesC2.js";function ne(r){const o=new TextEncoder;return window.crypto.subtle.importKey("raw",o.encode(r),"PBKDF2",!1,["deriveBits","deriveKey"])}function ae(r,o){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:1e5,hash:"SHA-256"},r,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}function se(){const r=N(),{encrypt:o}=r.value,c=Uint8Array.from(Object.values(o.iv)),e=Uint8Array.from(Object.values(o.salt));return{decrypt:async(a,i)=>{if(!a)return;const y=await ne(a),_=await ae(y,e),f=Uint8Array.from(i,l=>l.charCodeAt(0)),u=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:c},_,f);return new TextDecoder().decode(u)}}}const re={key:0,"w-full":"","pt-14":"","pb-10":""},le={class:"decrypt-password-container w-full sm:w-1/2","flex-center":"","m-auto":"",relative:""},ce={key:1},ie=b({__name:"ValaxyGalleryDecrypt",props:{encryptedPhotos:{}},setup(r,{expose:o}){const c=r,e=w(""),a=w(""),i=w(!1),{decrypt:y}=se();async function _(){const l=c.encryptedPhotos;if(l)try{const n=await y(e.value,l);a.value=n||""}catch(n){i.value=!0,console.error(n)}}function f(){a.value="",e.value=""}const u=x(()=>JSON.parse(a.value||"[]")||[]);return o({photos:u}),(l,n)=>{const v=Q;return d(),g("div",null,[a.value?(d(),g("div",ce,[m(v,{photos:u.value},null,8,["photos"]),s("div",{"w-full":"","text-center":"","mt-8":""},[s("button",{"m-auto":"",class:"btn","font-bold":"",onClick:f}," Encrypt Again ")])])):(d(),g("div",re,[s("div",le,[K(s("input",{"onUpdate:modelValue":n[0]||(n[0]=p=>e.value=p),"w-full":"",border:"","pl-5":"","pr-11":"","py-3":"",rounded:"","hover:shadow":"",transition:"",type:"password",placeholder:"Enter password",class:S(i.value&&"border-red"),onInput:n[1]||(n[1]=p=>i.value=!1),onKeyup:$(_,["enter"])},null,34),[[V,e.value]]),s("div",{"cursor-pointer":"",absolute:"","text-2xl":"","i-ri-arrow-right-circle-line":"","right-3":"","text-gray":"","hover:text-black":"",onClick:_})])]))])}}}),ue={text:"center",class:"yun-text-light",p:"2"},pe={class:"page-action",text:"center"},de=["title"],be=b({__name:"gallery",setup(r){const o=ee(),{t:c}=oe(),e=U(),a=I(e);j([H({"@type":"CollectionPage"})]);const i=te(),y=x(()=>i.meta.frontmatter.photos||[]),f=W().value.addons["valaxy-addon-lightgallery"]?T(()=>M(()=>import("./YunGallery.C3kHe1qC.js"),__vite__mapDeps([0,1]))):()=>null,u=z(),l=F("galleryRef"),n=x(()=>{var v;return y.value.length||((v=l.value)==null?void 0:v.photos.length)});return(v,p)=>{const k=J,P=Z,A=ie,D=O("RouterView"),E=X,R=q;return d(),g(G,null,[m(E,null,{default:h(()=>[m(k),m(D,null,{default:h(({Component:B})=>[(d(),C(Y(B),null,{"main-header":h(()=>[m(P,{title:t(a)||t(c)("title.gallery"),icon:t(e).icon||"i-ri-gallery-line",color:t(e).color,"page-title-class":t(e).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),default:h(()=>[s("div",ue,L(t(c)("counter.photos",n.value||0)),1),s("div",pe,[s("a",{class:"yun-icon-btn",title:t(c)("accessibility.back"),onClick:p[0]||(p[0]=()=>t(o).back())},p[1]||(p[1]=[s("div",{"i-ri-arrow-go-back-line":""},null,-1)]),8,de)]),t(u)?(d(),C(A,{key:0,ref_key:"galleryRef",ref:l,"encrypted-photos":t(u)},null,8,["encrypted-photos"])):(d(),C(t(f),{key:1,photos:y.value},null,8,["photos"]))]),_:2},1024))]),_:1})]),_:1}),m(R)],64)}}});export{be as default};
