import{a as Z,g as j}from"./chunks/dayjs.DPscOGnl.js";function d(n,t){for(var e=0;e<t.length;e++){const r=t[e];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in n)){const f=Object.getOwnPropertyDescriptor(r,o);f&&Object.defineProperty(n,o,f.get?f:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}var tt={value:function(){}};function J(){for(var n=0,t=arguments.length,e={},r;n<t;++n){if(!(r=arguments[n]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new C(e)}function C(n){this._=n}function nt(n,t){return n.trim().split(/^|\s+/).map(function(e){var r="",o=e.indexOf(".");if(o>=0&&(r=e.slice(o+1),e=e.slice(0,o)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}C.prototype=J.prototype={constructor:C,on:function(n,t){var e=this._,r=nt(n+"",e),o,f=-1,c=r.length;if(arguments.length<2){for(;++f<c;)if((o=(n=r[f]).type)&&(o=et(e[o],n.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++f<c;)if(o=(n=r[f]).type)e[o]=G(e[o],n.name,t);else if(t==null)for(o in e)e[o]=G(e[o],n.name,null);return this},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new C(n)},call:function(n,t){if((o=arguments.length-2)>0)for(var e=new Array(o),r=0,o,f;r<o;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(f=this._[n],r=0,o=f.length;r<o;++r)f[r].value.apply(t,e)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],o=0,f=r.length;o<f;++o)r[o].value.apply(t,e)}};function et(n,t){for(var e=0,r=n.length,o;e<r;++e)if((o=n[e]).name===t)return o.value}function G(n,t,e){for(var r=0,o=n.length;r<o;++r)if(n[r].name===t){n[r]=tt,n=n.slice(0,r).concat(n.slice(r+1));break}return e!=null&&n.push({name:t,value:e}),n}const rt=Object.freeze(Object.defineProperty({__proto__:null,dispatch:J},Symbol.toStringTag,{value:"Module"})),ot=Z(rt),at=ot.dispatch,W=Math.PI/180,it={archimedean:Q,rectangular:mt},E=64,F=2048;var K=function(){var n=[256,256],t=ut,e=ft,r=lt,o=H,f=H,c=st,m=ct,M=Q,S=[],b=1/0,v=at("word","end"),h=null,I=Math.random,i={},P=gt;i.canvas=function(a){return arguments.length?(P=z(a),i):P},i.start=function(){var a=R(P()),l=vt((n[0]>>5)*n[1]),y=null,x=S.length,_=-1,O=[],g=S.map(function(s,u){return s.text=t.call(this,s,u),s.font=e.call(this,s,u),s.style=o.call(this,s,u),s.weight=f.call(this,s,u),s.rotate=c.call(this,s,u),s.size=~~r.call(this,s,u),s.padding=m.call(this,s,u),s}).sort(function(s,u){return u.size-s.size});return h&&clearInterval(h),h=setInterval(T,0),T(),i;function T(){for(var s=Date.now();Date.now()-s<b&&++_<x&&h;){var u=g[_];u.x=n[0]*(I()+.5)>>1,u.y=n[1]*(I()+.5)>>1,ht(a,u,g,_),u.hasText&&D(l,u,y)&&(O.push(u),v.call("word",i,u),y?xt(y,u):y=[{x:u.x+u.x0,y:u.y+u.y0},{x:u.x+u.x1,y:u.y+u.y1}],u.x-=n[0]>>1,u.y-=n[1]>>1)}_>=x&&(i.stop(),v.call("end",i,O,y))}},i.stop=function(){h&&(clearInterval(h),h=null);for(const a of S)delete a.sprite;return i};function R(a){const l=a.getContext("2d",{willReadFrequently:!0});a.width=a.height=1;const y=Math.sqrt(l.getImageData(0,0,1,1).data.length>>2);return a.width=(E<<5)/y,a.height=F/y,l.fillStyle=l.strokeStyle="red",{context:l,ratio:y}}function D(a,l,y){n[0],n[1];for(var x=l.x,_=l.y,O=Math.sqrt(n[0]*n[0]+n[1]*n[1]),g=M(n),T=I()<.5?1:-1,s=-T,u,k,p;(u=g(s+=T))&&(k=~~u[0],p=~~u[1],!(Math.min(Math.abs(k),Math.abs(p))>=O));)if(l.x=x+k,l.y=_+p,!(l.x+l.x0<0||l.y+l.y0<0||l.x+l.x1>n[0]||l.y+l.y1>n[1])&&(!y||pt(l,y))&&!yt(l,a,n[0])){for(var w=l.sprite,q=l.width>>5,B=n[0]>>5,L=l.x-(q<<4),X=L&127,U=32-X,V=l.y1-l.y0,Y=(l.y+l.y0)*B+(L>>5),N,$=0;$<V;$++){N=0;for(var A=0;A<=q;A++)a[Y+A]|=N<<U|(A<q?(N=w[$*q+A])>>>X:0);Y+=B}return!0}return!1}return i.timeInterval=function(a){return arguments.length?(b=a??1/0,i):b},i.words=function(a){return arguments.length?(S=a,i):S},i.size=function(a){return arguments.length?(n=[+a[0],+a[1]],i):n},i.font=function(a){return arguments.length?(e=z(a),i):e},i.fontStyle=function(a){return arguments.length?(o=z(a),i):o},i.fontWeight=function(a){return arguments.length?(f=z(a),i):f},i.rotate=function(a){return arguments.length?(c=z(a),i):c},i.text=function(a){return arguments.length?(t=z(a),i):t},i.spiral=function(a){return arguments.length?(M=it[a]||a,i):M},i.fontSize=function(a){return arguments.length?(r=z(a),i):r},i.padding=function(a){return arguments.length?(m=z(a),i):m},i.random=function(a){return arguments.length?(I=a,i):I},i.on=function(){var a=v.on.apply(v,arguments);return a===v?i:a},i};function ut(n){return n.text}function ft(){return"serif"}function H(){return"normal"}function lt(n){return Math.sqrt(n.value)}function st(){return(~~(random()*6)-3)*30}function ct(){return 1}function ht(n,t,e,r){if(!t.sprite){var o=n.context,f=n.ratio;o.clearRect(0,0,(E<<5)/f,F/f);var c=0,m=0,M=0,S=e.length;for(--r;++r<S;){t=e[r],o.save(),o.font=t.style+" "+t.weight+" "+~~((t.size+1)/f)+"px "+t.font;const u=o.measureText(t.text),k=-Math.floor(u.width/2);let p=(u.width+1)*f,w=t.size<<1;if(t.rotate){var b=Math.sin(t.rotate*W),v=Math.cos(t.rotate*W),h=p*v,I=p*b,i=w*v,P=w*b;p=Math.max(Math.abs(h+P),Math.abs(h-P))+31>>5<<5,w=~~Math.max(Math.abs(I+i),Math.abs(I-i))}else p=p+31>>5<<5;if(w>M&&(M=w),c+p>=E<<5&&(c=0,m+=M,M=0),m+w>=F)break;o.translate((c+(p>>1))/f,(m+(w>>1))/f),t.rotate&&o.rotate(t.rotate*W),o.fillText(t.text,k,0),t.padding&&(o.lineWidth=2*t.padding,o.strokeText(t.text,k,0)),o.restore(),t.width=p,t.height=w,t.xoff=c,t.yoff=m,t.x1=p>>1,t.y1=w>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,c+=p}for(var R=o.getImageData(0,0,(E<<5)/f,F/f).data,D=[];--r>=0;)if(t=e[r],!!t.hasText){for(var a=t.width,l=a>>5,y=t.y1-t.y0,x=0;x<y*l;x++)D[x]=0;if(c=t.xoff,c==null)return;m=t.yoff;for(var _=0,O=-1,g=0;g<y;g++){for(var x=0;x<a;x++){var T=l*g+(x>>5),s=R[(m+g)*(E<<5)+(c+x)<<2]?1<<31-x%32:0;D[T]|=s,_|=s}_?O=g:(t.y0++,y--,g--,m++)}t.y1=t.y0+O,t.sprite=D.slice(0,(t.y1-t.y0)*l)}}}function yt(n,t,e){e>>=5;for(var r=n.sprite,o=n.width>>5,f=n.x-(o<<4),c=f&127,m=32-c,M=n.y1-n.y0,S=(n.y+n.y0)*e+(f>>5),b,v=0;v<M;v++){b=0;for(var h=0;h<=o;h++)if((b<<m|(h<o?(b=r[v*o+h])>>>c:0))&t[S+h])return!0;S+=e}return!1}function xt(n,t){var e=n[0],r=n[1];t.x+t.x0<e.x&&(e.x=t.x+t.x0),t.y+t.y0<e.y&&(e.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function pt(n,t){return n.x+n.x1>t[0].x&&n.x+n.x0<t[1].x&&n.y+n.y1>t[0].y&&n.y+n.y0<t[1].y}function Q(n){var t=n[0]/n[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function mt(n){var t=4,e=t*n[0]/n[1],r=0,o=0;return function(f){var c=f<0?-1:1;switch(Math.sqrt(1+4*c*f)-c&3){case 0:r+=e;break;case 1:o+=t;break;case 2:r-=e;break;default:o-=t;break}return[r,o]}}function vt(n){for(var t=[],e=-1;++e<n;)t[e]=0;return t}function gt(){return document.createElement("canvas")}function z(n){return typeof n=="function"?n:function(){return n}}const wt=j(K),St=d({__proto__:null,default:wt},[K]);export{St as i};
